#!/usr/bin/env php
<?php
require dirname(__FILE__) . '/../vendor/autoload.php';

use Symfony\Component\DependencyInjection\ContainerBuilder;

use Http\Adapter\Guzzle6\Client;
use Http\Client\HttpClient;

use Ubi\Deploy\Deploy;
use Ubi\Deploy\Service\CloudProvider;
use Ubi\Deploy\Service\JenkinsManager;

$container = new ContainerBuilder();

$container->register(HttpClient::class, Client::class);
$container->register(CloudProvider::class, CloudProvider::class)
    ->setAutowired(true);
$container->register(JenkinsManager::class, JenkinsManager::class)
    ->setAutowired(true);
$container->register(Deploy::class, Deploy::class)
    ->setAutowired(true)
    ->setPublic(true);
$container->compile();
return $container->get(Deploy::class)->run();