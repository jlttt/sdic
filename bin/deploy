#!/usr/bin/env php
<?php
require dirname(__FILE__) . '/../vendor/autoload.php';

use Ubi\Deploy\Deploy;
use Ubi\Deploy\Service\CloudProvider;
use Ubi\Deploy\Service\JenkinsManager;

use Http\Adapter\Guzzle6\Client;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Definition;

$container = new ContainerBuilder();

$container->setDefinition('http_client', new Definition(Client::class));
$container->setDefinition('cloud_provider', new Definition(CloudProvider::class));

$deploy = new Deploy(
    $container->get('cloud_provider'),
    new JenkinsManager($container->get('http_client'))
);
return $deploy->run();